{% if auth_pages.has_signup and auth_signup %}
  <section class="registration pt-3">
    <div class="container">
      <form method="post" role="form" class="mx-auto w-75 text-start email-form">
        {% if messages %}
          {% for message in messages %}
            {% if "signup" in message.extra_tags %}
              {% if "error" in message.tags %}
                <div class="alert alert-danger text-center">{{ message }}</div>
              {% elif "success" in message.tags %}
                <div class="alert alert-success text-center">{{ message }}</div>
              {% endif %}
            {% endif %}
          {% endfor %}
        {% endif %}
        {% csrf_token %}
        {% if next %}<input type="hidden" name="next" value="{{ next }}">{% endif %}
        {% if back %}<input type="hidden" name="back" value="{{ back }}">{% endif %}
        <div class="row">
          <div class="col-md-6 form-group">{{ form.username }}</div>
          <div class="col-md-6 form-group mt-3 mt-md-0">{{ form.email }}</div>
        </div>
        <div class="form-group mt-3">
          {{ form.password1 }}
          <small class="form-text text-muted">{{ form.password1.help_text }}</small>
        </div>
        <div class="form-group mt-3">
          {{ form.password2 }}
          <small class="form-text text-muted">{{ form.password2.help_text }}</small>
        </div>
        <div class="text-center mt-4">
          <button type="submit" class="btn btn-primary">Sign up</button>
          {% if back %}<a href="{{ back }}" class="back-btn btn btn-secondary ms-2">Back</a>{% endif %}
        </div>
        {% if auth_pages.has_signin %}
          <p class="mt-5">
            Already have an account? You can
            <a href="{% url 'base:signin' %}?next={{ next|urlencode }}&back={{ back|urlencode }}">log in here</a>
          </p>
        {% endif %}
      </form>
    </div>
  </section>
{% endif %}
